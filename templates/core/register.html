{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Register - {{ event.name }}</title>
  <script>window.CSRF_TOKEN = '{{ csrf_token }}';</script>
  {% csrf_token %}
  <!-- The csrf_token above is for JS access only; the form itself includes its own token -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/2cdfdf2a91.js" crossorigin="anonymous"></script>
   <link rel="stylesheet" type="text/css" href="{% static 'core/styles.css' %}">
   <link rel="stylesheet" type="text/css" href="{% static 'core/style.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'core/favicon.ico' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'core/register.css' %}">
</head>
{% comment %} <body>
    <!--raunak start -->

  <div class="page-wrap">
    <main>
      <form method="post" novalidate>
        {% csrf_token %}

        {% if event.event_type == 'team' %}
        <div class="card">
          <h2 class="section-title">Team Details</h2>
          <div class="grid-2">
            <div class="field">
              <label>Team Name</label>
              {{ team_name_form.team_name }}
            </div>
            <div class="field">
              <label>Team Size</label>
              <input id="team-size" type="number" value="1" min="1" max="{{ max_participants }}" disabled>
            </div>
          </div>
       
        {% endif %}

        <div class="card">
          <h2 class="section-title">Member Details</h2>
          <div class="member-card">
            <h3 style="margin:0 0 8px; font-size:14px; color:#BDF522;">Member 1</h3>
            <div class="field"> <label>Name</label> {{ form.name }} </div>
            <div class="field"> <label>Email</label> {{ form.email }} </div>
            <div class="field"> <label>Phone number</label> {{ form.phone_no }} </div>
            <div class="field gender">
              <label>Gender</label>
              <div class="gender-group">
                {% for radio in form.gender %}
                <label class="gender-box">
                  {{ radio.tag }}
                  <span>{{ radio.choice_label }}</span>
                </label>
                {% endfor %}
              </div>
            </div>
            <div class="field"> <label>College/Institute Name</label> {{ form.institute_name }} </div>
            <div class="field"> <label>Course Enrolled</label> {{ form.program_enrolled }} </div>
            <div class="field disability">
              <label>Are you a person with disability (PwD)?</label>
              <div class="disability-group">
                {% for radio in form.is_disabled %}
                <label class="disability-box">
                  {{ radio.tag }}
                  <span>{{ radio.choice_label }}</span>
                </label>
                {% endfor %}
              </div>
            </div>
            <div class="field year">
              <label>Graduating Year</label>
              <div class="year-group">
                {% for radio in form.year_of_passing %}
                <label class="year-box">
                  {{ radio.tag }}
                  <span>{{ radio.choice_label }}</span>
                </label>
                {% endfor %}
              </div>
            </div>
          </div>

          {% if event.event_type == 'team' %}
            {{ member_formset.management_form }}
            <div id="members-container">
              {% for mform in member_formset %}
              <div class="member-card" data-member-index="{{ forloop.counter }}">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
                  <h3 style="margin:0; font-size:14px; color:#BDF522;">Member {{ forloop.counter|add:1 }}</h3>
                  <button type="button" class="btn btn-danger" data-remove>Remove</button>
                </div>
                <div class="field"> <label>Name</label> {{ mform.name }} </div>
                <div class="field"> <label>Email</label> {{ mform.email }} </div>
                <div class="field"> <label>Phone number</label> {{ mform.phone_no }} </div>
                <div class="field gender">
                  <label>Gender</label>
                  <div class="gender-group">
                    {% for radio in mform.gender %}
                    <label class="gender-box">
                      {{ radio.tag }}
                      <span>{{ radio.choice_label }}</span>
                    </label>
                    {% endfor %}
                  </div>
                </div>
                <div class="field"> <label>College/Institute Name</label> {{ mform.institute_name }} </div>
                <div class="field"> <label>Course Enrolled</label> {{ mform.program_enrolled }} </div>
                <div class="field disability">
                  <label>PwD</label>
                  <div class="disability-group">
                    {% for radio in mform.is_disabled %}
                    <label class="disability-box">
                      {{ radio.tag }}
                      <span>{{ radio.choice_label }}</span>
                    </label>
                    {% endfor %}
                  </div>
                </div>
                <div class="field year">
                  <label>Graduating Year</label>
                  <div class="year-group">
                    {% for radio in mform.year_of_passing %}
                    <label class="year-box">
                      {{ radio.tag }}
                      <span>{{ radio.choice_label }}</span>
                    </label>
                    {% endfor %}
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>

            <template id="empty-member-template">
              <div class="member-card" data-member-index="__NUM__">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
                  <h3 style="margin:0; font-size:14px; color:#BDF522;">Member __NUM__</h3>
                  <button type="button" class="btn btn-danger" data-remove>Remove</button>
                </div>
                <div class="field"> <label>Name</label> {{ member_formset.empty_form.name.as_widget|safe }} </div>
                <div class="field"> <label>Email</label> {{ member_formset.empty_form.email.as_widget|safe }} </div>
                <div class="field"> <label>Phone number</label> {{ member_formset.empty_form.phone_no.as_widget|safe }} </div>
                 <div class="field gender">
                   <label>Gender</label>
                   <div class="gender-group">
                     {% for radio in member_formset.empty_form.gender %}
                     <label class="gender-box">
                       {{ radio.tag }}
                       <span>{{ radio.choice_label }}</span>
                     </label>
                     {% endfor %}
                   </div>
                 </div>
                <div class="field"> <label>College/Institute Name</label> {{ member_formset.empty_form.institute_name.as_widget|safe }} </div>
                <div class="field"> <label>Course Enrolled</label> {{ member_formset.empty_form.program_enrolled.as_widget|safe }} </div>
                 <div class="field disability">
                   <label>PwD</label>
                   <div class="disability-group">
                     {% for radio in member_formset.empty_form.is_disabled %}
                     <label class="disability-box">
                       {{ radio.tag }}
                       <span>{{ radio.choice_label }}</span>
                     </label>
                     {% endfor %}
                   </div>
                 </div>
                 <div class="field year">
                   <label>Graduating Year</label>
                   <div class="year-group">
                     {% for radio in member_formset.empty_form.year_of_passing %}
                     <label class="year-box">
                       {{ radio.tag }}
                       <span>{{ radio.choice_label }}</span>
                     </label>
                     {% endfor %}
                   </div>
                 </div>
              </div>
            </template>

            <div class="actions">
              <button id="add-member" type="button" class="btn">+ Add Member</button>
              <button type="submit" class="register-btn">Register</button>
            </div>
          {% else %}
            <div class="actions" style="justify-content:flex-end;">
              <button type="submit" class="register-btn">Register</button>
            </div>
          {% endif %}
        </div>
      </form>
    </main>

    <aside class="sidebar">
      <div class="card">
        <h3 class="section-title" style="margin-bottom:6px;">{{ event.name }}</h3>
        <ul class="meta">
          <li>  
            <div class="meta-icon">
                <svg class="register-img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#BDF522" class="bi bi-calendar4" viewBox="0 0 16 16">
               <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M2 2a1 1 0 0 0-1 1v1h14V3a1 1 0 0 0-1-1zm13 3H1v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1z"/>
               </div>
                <div class="meta-about"><div class="info">Date</div>
            </svg>{{ city.time|date:'l, d F Y' }}</div>
          
          </li>
          <li>
            
             <div class="meta-icon"> 
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#BDF522" class="bi bi-geo-alt" viewBox="0 0 16 16">
              <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"/>
              <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
              </svg>
              </div>
              <div class="meta-about"><div class="info">Venue</div>
            </svg>{{ city.venue }}</div>
            
          </li>
          <div class="meta-city">
          <li>
            <span>{{ city.name }}</span>
          </li>
        </div>
        </ul>
      </div>
    </aside>
  </div>
   </div>

  {% if event.event_type == 'team' %}
    
  {% endif %}
  <script src="{% static 'core/script.js' %}"></script>

<!--raunak end -->
    <nav>
        <div class="nav-logo">
          <!-- Corrected the static path to include 'core/asset/' -->
          <a href="/"
            ><img
              src="{% static 'core/asset/alcher-logo.png' %}"
              alt="Alcher Logo"
          /></a>
        </div>
        <div class="navigators">
          <ul>
            <li><a href="/#about-alcheri">ABOUT US</a></li>
            <li><a href="/#schedule1">SCHEDULE</a></li>
            <li><a href="/#sponsers1">SPONSORS</a></li>
            <li><a href="/#contect1">CONTACT</a></li>
            <!-- <button class="hideOnMobile">REGISTER</button> -->
            <li class="menuBtn" onclick="showSidebar()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="5vw"
                viewBox="0 -960 960 960"
                width="5vw"
                fill="#5f6368"
              >
                <path
                  d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"
                />
              </svg>
            </li>
          </ul>
  
          <ul class="hamburger">
            <li class="closeBtn" onclick="hideSidebar()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="8vw"
                viewBox="0 -960 960 960"
                width="8vw"
                fill="#5f6368"
              >
                <path
                  d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"
                />
              </svg>
            </li>
            <li><a class="ham-link" href="#about-alcheri">ABOUT US</a></li>
            <li><a class="ham-link" href="#schedule1">SCHEDULE</a></li>
            <li><a class="ham-link" href="#sponsers1">SPONSORS</a></li>
            <li><a class="ham-link" href="#contect1">CONTACT</a></li>
            <!-- <li><button>REGISTER</button></li> -->
          </ul>
        </div>
      </nav>
    <div class="container">
        <h1>REGISTRATIONS</h1>
        <h2><span class="ename">{{ event.name }}</span><span class="cname">, {{ city.name }} - {{ event.event_type }}</span></h2>
        {% if event.event_type == 'team' %}
        <h3 class="teamSize">(Team of {{event.min_participants}}-{{event.max_participants}})</h3>{% endif %}
        <br>
        <div class="disclaimer" style="font-family:'carltine';">All fields marked <span class="astrick">*</span> are mandatory.</div>
        <br>
        <br>
        <form method="post" id="registration-form">
            {% csrf_token %}

            {% if event.event_type == 'team' %}
       
                <!-- Render the form for entering team name -->
                <div class="form-layout">
                    {% for field in team_name_form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}">Team Name <span class="astrick">*</span></label>
                        {{ field }}
                        {% if field.errors %}
                        <div class="error">{{ field.errors|join:", " }}</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            {% endif %}

            <h3><span class="fillhead">Head's Data:</span> </span></h3>
            <br>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="id_head_name">Head's Name <span class="astrick">*</span></label>
                    {{ form.name }}
                    {% if form.name.errors %}
                        <div class="error">{{ form.name.errors|join:", " }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_head_gender">Gender <span class="astrick">*</span></label>
                    <select name="gender" id="id_gender" class="form-control" placeholder="Select Gender" required>
                        <option value="">Select Gender</option>
                        <option value="M">Male</option>
                        <option value="F">Female</option>
                        <option value="O">Others</option>
                    </select>
                    {% if form.gender.errors %}
                        <div class="error">{{ form.gender.errors|join:", " }}</div>
                    {% endif %}
                </div>
            </div>
            <br>

            <div class="form-row">
                <div class="form-group">
                    <label for="id_head_phone_no">Head's Contact Number <span class="astrick">*</span></label>
                    {{ form.phone_no }}
                    {% if form.phone_no.errors %}
                        <div class="error">{{ form.phone_no.errors|join:", " }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_head_email">E-Mail <span class="astrick">*</span></label>
                    {{ form.email }}
                    {% if form.email.errors %}
                        <div class="error">{{ form.email.errors|join:", " }}</div>
                    {% endif %}
                </div>
            </div>

            <br>

            <div class="form-row">
                <div class="form-group">
                    <label for="id_head_program_enrolled">Program Enrolled <span class="astrick">*</span></label>
                    {{ form.program_enrolled }}
                    {% if form.program_enrolled.errors %}
                        <div class="error">{{ form.program_enrolled.errors|join:", " }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="id_head_institute_name">Institute Name <span class="astrick">*</span></label>
                    {{ form.institute_name }}
                    {% if form.institute_name.errors %}
                        <div class="error">{{ form.institute_name.errors|join:", " }}</div>
                    {% endif %}
                </div>
            </div>

            <br>

            <div class="form-row">
                <div class="form-group">
                    <label for="id_head_year_of_passing">Year of Passing <span class="astrick">*</span></label>
                    {{ form.year_of_passing }}
                    {% if form.year_of_passing.errors %}
                        <div class="error">{{ form.year_of_passing.errors|join:", " }}</div>
                    { % endif %}
                </div>
            </div>
        
            

            
            {% if event.event_type == 'team' %}
                <h3 id="teamMembersHead" style="display: none; font-family:'carltine';">Team Members</h3>
                <!-- Render the formset for team members -->
                <div id="team-members-container">
                    {{ member_formset.management_form }}
                    {% for form in member_formset %}
                    <div class="form-header">
                        <h3 style="font-family:'carltine';">Member's Data</h3>
                        <span><span class="preindex" style="font-family:'carltine';">Member no.</span> <span class="index" style="font-family:'carltine';">
                            {{forloop.counter}}</span></span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Member's Name <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="text" name="members-{{ forloop.counter0 }}-name" id="id_members-{{ forloop.counter0 }}-name" class="form-control" />
                                    </div>
                        </div>
                        <div class="form-group">
                            <label>Gender <span class="astrick">*</span></label>
                            <select name="members-{{ forloop.counter0 }}-gender" id="id_members-{{ forloop.counter0 }}-gender" class="form-control">
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Member's Contact Number <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="text" name="members-{{ forloop.counter0 }}-phone_no" id="id_members-{{ forloop.counter0 }}-phone_no" class="form-control" />
                                </div>
                        </div>
                        <div class="form-group">
                            <label>E-Mail <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="email" name="members-{{ forloop.counter0 }}-email" id="id_members-{{ forloop.counter0 }}-email" class="form-control" />
                                <button type="button" class="btn-input-append" onclick="copyField('id_email', 'id_members-{{ forloop.counter0 }}-email')">Same as leader</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Program Enrolled <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="text" name="members-{{ forloop.counter0 }}-program_enrolled" id="id_members-{{ forloop.counter0 }}-program_enrolled" class="form-control" />
                                <button type="button" class="btn-input-append" onclick="copyField('id_program_enrolled', 'id_members-{{ forloop.counter0 }}-program_enrolled')">Same as leader</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Institute Name <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="text" name="members-{{ forloop.counter0 }}-institute_name" id="id_members-{{ forloop.counter0 }}-institute_name" class="form-control" />
                                <button type="button" class="btn-input-append" onclick="copyField('id_institute_name', 'id_members-{{ forloop.counter0 }}-institute_name')">Same as leader</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Year of Passing <span class="astrick">*</span></label>
                            <div class="input-group">
                                <input type="text" name="members-{{ forloop.counter0 }}-year_of_passing" id="id_members-{{ forloop.counter0 }}-year_of_passing" class="form-control" />
                                <button type="button" class="btn-input-append" onclick="copyField('id_year_of_passing', 'id_members-{{ forloop.counter0 }}-year_of_passing')">Same as leader</button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-danger" onclick="removeMember(this)">
                        <i class="fa-solid fa-user-minus" style="color: #583400;"></i> Delete Member
                    </button>

                    {% endfor %}
                </div>
                

                <!-- Button to add new member -->
               
                <button type="button" id="add-member-button" class="btn btn-primary"><i class="fa-solid fa-user-plus" style="color: #583400;"></i> Add Member</button>
                
                <button type="button" id="delete-last-member-button" class="btn btn-danger">
                    <i class="fa-solid fa-user-minus" style="color: #583400;"></i> Delete Member
                </button>
    
                {% endif %}
           

            <button type="submit" class="btn btn-primary" id="registerbut" style="font-family: 'carltine'; font-size: 20px; padding: 10px 12px; width: 180px;">Register</button>
        </form>
    </div>
    {% if event.event_type == 'team' %}
    <script>
        const minParticipants = {{event.min_participants}};
        const maxParticipants = {{event.max_participants}};
   </script>
    <script src="{% static 'core/script.js' %}"></script>
    {% endif %}
    {% if event.event_type == 'solo' %}
    <script src="{% static 'core/scriptcopy.js' %}"></script>
    {% endif %}
</body> {% endcomment %}


<!-- Competition landing starts-->
<body>
    <div class="top-section">
      <div class="event-banner">
        <img src="{%static 'core/asset/CompetitionPhoto.png' %}" alt="{{ event.name }}" />
      </div>
    </div>
    <div class="event-container">
      <h1 class="event-title">ELECTRIC HEELS</h1>
      <p class="event-subtitle">The ultimate dance challenge</p>
      <div class="event-details">
        <div class="left-info">
          <p class="event-date">
            <img src="{%static 'core/asset/calendar.png' %}" alt="calendar" /> Monday, 24 August 2025
          </p>
          <p class="event-location">
            <img src="{%static 'core/asset/marker-pin-01.png' %}" alt="pin" /> Bhupen Hazarika, IIT
            Guwahati
          </p>

          <h3 class="about-the-event">About the Event</h3>
          <p class="event-description">
            This highly anticipated competition showcases diverse dance forms,
            from street styles to classical fusion, drawing participants and
            spectators with its vibrant energy and fierce talent. As a key event
            leading up to Alcheringa, Electric Heels not only provides a
            platform for incredible performers but also amplifies the excitement
            and artistic spirit that defines IIT Guwahati's annual cultural
            festival.
          </p>
        </div>
        <div class="right-info">
          <h3 class="event-state">ASSAM</h3>
          <div class="info-box">
            <div class="info-icon">
              <img src="{%static 'core/asset/users-01.png' %}" alt="users" />
            </div>
            <div class="info-text">
              <span class="info-label">Team Size</span>
              <span class="info-value">5-7 members</span>
            </div>
          </div>

          <div class="info-box">
            <div class="info-icon">
              <img src="{%static 'core/asset/clock.png' %}" alt="clock" />
            </div>
            <div class="info-text">
              <span class="info-label">Registration Deadline</span>
              <span class="info-value">Sunday, 15 July</span>
            </div>
          </div>

          <a href="#register-form" class="register-btn">Register</a>
          <button class="copy-btn">
            <img src="link-broken-01.png" alt="" />
            <span class="copy-link">Copy link</span>
          </button>
        </div>
      </div>
    </div>
    <script src="{%static 'core/register.js' %}"></script>

    <!-- Competition landing end-->
</body>
</html>



